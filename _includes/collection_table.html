{% if include.collection == "aotd" %}
  {% assign allapps = site.data["collection"]  uniq | sort: "name" %}
  {% assign random = site.time | date: "%s%N" | modulo: allapps.size %}
  {% assign apps = "" | split: ',' %}
  {% assign apps = apps | push: allapps[random] %}
{% else %}
  {% assign apps = site.data["collection"] | where_exp:"app",
"app.collection contains include.collection" | uniq | sort: "name" %}
{% endif %}
<style>
    ul { padding: 5px; }

    .collection-table-wrapper table li {
        margin-left: 10px !important;
    }

    .collection-table-wrapper table ul li {
        margin-left: 10px !important;
    }

    .collection-table-wrapper {
        display: block !important;
        width: 100% !important;
        max-width: 90vw !important;
        max-height: 80vh !important;
        overflow-x: auto !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        box-sizing: border-box !important;
    }

    .collection-table-wrapper table {
        min-width: 700px !important;
        width: 700px !important;
        table-layout: fixed !important;
    }

    .collection-table-wrapper th {
        position: sticky !important;
        top: 0 !important;
        background: #f5f5f5 !important;
        white-space: nowrap !important;
        padding: 8px !important;
        z-index: 5 !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) !important;
    }

    .collection-table-wrapper td {
        white-space: nowrap !important;
        padding: 8px !important;
    }

    .collection-table-wrapper td:last-child {
        white-space: normal !important;
    }

    .collection-table-wrapper th:nth-child(1),
    .collection-table-wrapper td:nth-child(1) {
        width: 200px !important;
        min-width: 200px !important;
        max-width: 200px !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
    }

    .collection-table-wrapper th:nth-child(2),
    .collection-table-wrapper td:nth-child(2) {
        width: 150px !important;
        min-width: 150px !important;
        max-width: 150px !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
    }

    .collection-table-wrapper th:nth-child(3),
    .collection-table-wrapper td:nth-child(3) {
        width: 150px !important;
        min-width: 150px !important;
        max-width: 150px !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
    }

    .collection-table-wrapper th:nth-child(4),
    .collection-table-wrapper td:nth-child(4) {
        width: 150px !important;
        min-width: 150px !important;
        max-width: 150px !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
    }

    .collection-table-wrapper th:nth-child(5),
    .collection-table-wrapper td:nth-child(5) {
        width: 200px !important;
        min-width: 200px !important;
        max-width: 200px !important;
        white-space: normal !important;
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        word-break: break-word !important;
    }

    @media screen and (max-width: 839px) {
        .collection-table-wrapper {
            border: 1px solid #ddd !important;
            border-radius: 4px !important;
            margin: 1em 0 !important;
        }
    }

    @media screen and (min-width: 840px) {
        .collection-table-wrapper {
            max-width: 65vw !important;
            width: auto !important;
        }
    }
</style>

<div class="collection-table-wrapper">
<table style="font-size: 16px">
  <tr>
    <th>App. URL</th>
    <th>Author</th>
    <th >Reference(s)</th>
    <th >Technology(ies)</th>
    <th >Note(s)</th>
  </tr>
  {% for app in apps %}
  <tr>
    <td>
        <a href="{{ app.url }}">{{ app.name }}</a><br>
        {% if app.badge %}
            <img alt="GitHub stars" src="https://img.shields.io/github/stars/{{ app.badge }}?style=social">
        {% endif %}
    </td>
    <td>
        {{ app.author }}<br>
        {% if app.badge %}
            <img alt="GitHub contributors" src="https://img.shields.io/github/contributors/{{ app.badge }}">
        {% endif %}
    </td>
    <td >
      {% if app.references %}
        <ul> 
          {% for ref in app.references %}
            <li> <a href="{{ ref.url }}">{{ ref.name | capitalize }}</a> </li>
          {% endfor %}
        </ul>
      {% endif %}
    </td>
    <td > 
      {% if app.technology %}
        <ul>
          {% for tech in app.technology %}
            <li> {{ tech }} </li>
          {% endfor %}
        </ul>
      {% endif %}
    </td>
    <td>
        {{ app.notes }}<br>
        {% if app.badge %}
            <img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/{{ app.badge }}">
        {% endif %}
    </td>
  </tr>
  {% endfor %}
</table>
</div>
