{% if include.collection == "aotd" %}
  {% assign allapps = site.data["collection"]  uniq | sort: "name" %}
  {% assign random = site.time | date: "%s%N" | modulo: allapps.size %}
  {% assign apps = "" | split: ',' %}
  {% assign apps = apps | push: allapps[random] %}
{% else %}
  {% assign apps = site.data["collection"] | where_exp:"app",
"app.collection contains include.collection" | uniq | sort: "name" %}
{% endif %}

<link rel="stylesheet" href="{{ '/assets/css/collection_table.css' | relative_url }}">

<div class="collection-table-search-wrapper">
  <input type="text" id="collection-table-search" class="collection-table-search" placeholder="Search applications..." aria-label="Search applications by name, author, technology, or notes">
</div>

<div class="collection-table-wrapper" tabindex="0" role="region" aria-label="Collection table" data-wheel-mode="smart">
<table id="collection-table">
  <thead>
    <tr>
      <th data-column="0" role="columnheader" aria-sort="none" tabindex="0" aria-label="App. URL column, click to sort">
        <span class="th-content">App. URL</span>
        <span class="sort-indicator" aria-hidden="true"></span>
      </th>
      <th data-column="1" role="columnheader" aria-sort="none" tabindex="0" aria-label="Author column, click to sort">
        <span class="th-content">Author</span>
        <span class="sort-indicator" aria-hidden="true"></span>
      </th>
      <th data-column="2" role="columnheader" aria-sort="none" tabindex="0" aria-label="Reference(s) column, click to sort">
        <span class="th-content">Reference(s)</span>
        <span class="sort-indicator" aria-hidden="true"></span>
      </th>
      <th data-column="3" role="columnheader" aria-sort="none" tabindex="0" aria-label="Technology(ies) column, click to sort">
        <span class="th-content">Technology(ies)</span>
        <span class="sort-indicator" aria-hidden="true"></span>
      </th>
      <th data-column="4" role="columnheader" aria-sort="none" tabindex="0" aria-label="Note(s) column, click to sort">
        <span class="th-content">Note(s)</span>
        <span class="sort-indicator" aria-hidden="true"></span>
      </th>
    </tr>
  </thead>
  <tbody>
  {% for app in apps %}
  <tr class="table-row">
    <td data-label="App. URL">
        <a href="{{ app.url }}">{{ app.name }}</a><br>
        {% if app.badge %}
            <img alt="GitHub stars" src="https://img.shields.io/github/stars/{{ app.badge }}?style=social">
        {% endif %}
    </td>
    <td data-label="Author">
        {{ app.author }}<br>
        {% if app.badge %}
            <img alt="GitHub contributors" src="https://img.shields.io/github/contributors/{{ app.badge }}">
        {% endif %}
    </td>
    <td data-label="Reference(s)">
      {% if app.references %}
        <ul>
          {% for ref in app.references %}
            <li><a href="{{ ref.url }}">{{ ref.name | capitalize }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </td>
    <td data-label="Technology(ies)">
      {% if app.technology %}
        <ul>
          {% for tech in app.technology %}
            <li>{{ tech }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </td>
    <td data-label="Note(s)">
        {{ app.notes }}<br>
        {% if app.badge %}
            <img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/{{ app.badge }}">
        {% endif %}
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
</div>

<script src="{{ '/assets/js/collection_table.js' | relative_url }}" defer></script>
